<style type="text/css">
    /* General styles for both screen display and print */
    .print-format {
        font-size: 10px !important;
        line-height: 1.8 !important;
    }


    .print-format table td,
    .print-format table th {
        border: 1px solid #222426 !important;
    }

    .print-format table,
    .print-format table th,
    .print-format table td {
        border: 1px solid #222426 !important;
    }

    .print-format table th {
        font-weight: bold !important;
        text-align: center !important;
        color: #222426 !important;
    }

    /* Fit table cell width to the content */
    .print-format table td.fit,
    .print-format table th.fit {
        white-space: nowrap !important;
        width: 1% !important;
    }

    .font-weight-bold {
        font-weight: bold !important;
    }

    /* Styles specific to printing and PDF generation */
    @media print {
        @page {
            size: A4 portrait !important;
        }
    }
</style>

<div class="container-fluid">
    <div class="row mb-3">
        <div class="col-xs-12">
            <h3 class="text-center">{%= __("BÁO CÁO TÌNH HÌNH SX CỦA CA SX LŨY KẾ TRONG THÁNG") %}</h3>

			<div class="text-center">
				Ngày báo cáo: {%= frappe.datetime.str_to_user(filters.date).replace(/-/g, "/") %}
			</div>

            <table class="table table-bordered text-wrap">
                <thead>
                    <tr>
                        <th>Công đoạn</th>
                        <th>Ca</th>
                        <th>SL ngày</th>
                        <th>Sản lượng lũy kế </th>
                        <th>Phế luỹ kế</th>
                        <th>Tỷ lệ phế theo ca sx</th>
                    </tr>
                </thead>

                <tbody>
                    {% for(let i = 0; i < data.length; i++) { %} <tr>
                        {% if (data[i]['shift'] === null) { %}
                        <td colspan="2" class="font-weight-bold text-right">Tổng:</td>
                        <td class="font-weight-bold text-right">
                            {%= data[i]['output_qty'] !== null
                            ? parseFloat(data[i]['output_qty']).toLocaleString('en-US')
                            : '' %}
                        </td>
                        <td class="font-weight-bold text-right">
                            {%= data[i]['output_qty_cumulative'] !== null
                            ? parseFloat(data[i]['output_qty_cumulative']).toLocaleString('en-US')
                            : '' %}
                        </td>
						<td class="font-weight-bold text-right">
                            {%= data[i]['scrap_qty_cumulative'] !== null
                            ? parseFloat(data[i]['scrap_qty_cumulative']).toLocaleString('en-US')
                            : '' %}
                        </td>
                        <td class="font-weight-bold text-right">{%= data[i]['scrap_rate'] %}</td>
                        {% } else { %}
                        <td class="text-center">{%= data[i]['operation'] %}</td>
                        <td class="text-center">{%= data[i]['shift'] %}</td>
                        <td class="text-right">
                            {%= data[i]['output_qty'] !== null
                            ? parseFloat(data[i]['output_qty']).toLocaleString('en-US')
                            : '' %}
                        </td>
						<td class="text-right">
                            {%= data[i]['output_qty_cumulative'] !== null
                            ? parseFloat(data[i]['output_qty_cumulative']).toLocaleString('en-US')
                            : '' %}
                        </td>
                        <td class="text-right">
                            {%= data[i]['scrap_qty_cumulative'] !== null
                            ? parseFloat(data[i]['scrap_qty_cumulative']).toLocaleString('en-US')
                            : '' %}
                        </td>
                        <td class="text-right">{%= data[i]['scrap_rate'] %}</td>
                        {% } %}
                        </tr>
                        {% } %}
                </tbody>
            </table>
        </div>
    </div>
</div>